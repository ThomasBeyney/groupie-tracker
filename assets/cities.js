window.CITY_COORDS = {
  // Objet global contenant toutes les coordonnées géographiques (lat, lon)
  // La clé est un identifiant de ville + pays séparé par un tiret
  // Ex: "los_angeles-usa": { lat: 34.0522, lon: -118.2437 }
  "north_carolina-usa": { lat: 35.7822, lon: -80.7936 },
  "georgia-usa": { lat: 32.1656, lon: -82.9001 },
  "los_angeles-usa": { lat: 34.0522, lon: -118.2437 },
  "saitama-japan": { lat: 35.8617, lon: 139.6455 },
  "osaka-japan": { lat: 34.6937, lon: 135.5023 },
  "nagoya-japan": { lat: 35.1815, lon: 136.9066 },
  "penrose-new_zealand": { lat: -45.8913, lon: 170.5156 },
  "dunedin-new_zealand": { lat: -45.8788, lon: 170.5028 },
  "playa_del_carmen-mexico": { lat: 20.6296, lon: -87.0739 },
  "papeete-french_polynesia": { lat: -17.5516, lon: -149.5585 },
  "noumea-new_caledonia": { lat: -22.2758, lon: 166.4580 },
  "london-uk": { lat: 51.5074, lon: -0.1278 },
  "lausanne-switzerland": { lat: 46.5197, lon: 6.6323 },
  "lyon-france": { lat: 45.7640, lon: 4.8357 },
  "victoria-australia": { lat: -37.8136, lon: 144.9631 },
  "new_south_wales-australia": { lat: -33.8688, lon: 151.2093 },
  "queensland-australia": { lat: -20.9176, lon: 142.7028 },
  "auckland-new_zealand": { lat: -36.8485, lon: 174.7633 },
  "yogyakarta-indonesia": { lat: -7.7956, lon: 110.3695 },
  "bratislava-slovakia": { lat: 48.1486, lon: 17.1077 },
  "budapest-hungary": { lat: 47.4979, lon: 19.0402 },
  "minsk-belarus": { lat: 53.9006, lon: 27.5590 },
  "california-usa": { lat: 36.7783, lon: -119.4179 },
  "nevada-usa": { lat: 38.8026, lon: -116.4194 },
  "sao_paulo-brazil": { lat: -23.5505, lon: -46.6333 },
  "san_isidro-argentina": { lat: -34.4961, lon: -58.5215 },
  "arizona-usa": { lat: 34.0489, lon: -111.0937 },
  "texas-usa": { lat: 31.9686, lon: -99.9018 },
  "stockholm-sweden": { lat: 59.3293, lon: 18.0686 },
  "werchter-belgium": { lat: 50.9671, lon: 4.6338 },
  "lisbon-portugal": { lat: 38.7223, lon: -9.1393 },
  "bilbao-spain": { lat: 43.2630, lon: -2.9349 },
  "bogota-colombia": { lat: 4.7110, lon: -74.0721 },
  "new_york-usa": { lat: 40.7128, lon: -74.0060 },
  "dusseldorf-germany": { lat: 51.2277, lon: 6.7735 },
  "aarhus-denmark": { lat: 56.1629, lon: 10.2039 },
  "manchester-uk": { lat: 53.4808, lon: -2.2426 },
  "frankfurt-germany": { lat: 50.1109, lon: 8.6821 },
  "berlin-germany": { lat: 52.5200, lon: 13.4050 },
  "copenhagen-denmark": { lat: 55.6761, lon: 12.5683 },
  "doha-qatar": { lat: 25.2854, lon: 51.5310 },
  "minnesota-usa": { lat: 46.7296, lon: -94.6859 },
  "illinois-usa": { lat: 40.6331, lon: -89.3985 },
  "mumbai-india": { lat: 19.0760, lon: 72.8777 },
  "abu_dhabi-united_arab_emirates": { lat: 24.4539, lon: 54.3773 },
  "pennsylvania-usa": { lat: 41.2033, lon: -77.1945 },
  "westcliff_on_sea-uk": { lat: 51.5463, lon: 0.6955 },
  "merkers-germany": { lat: 50.8220, lon: 10.3330 },
  "maine-usa": { lat: 45.2538, lon: -69.4455 },
  "gothenburg-sweden": { lat: 57.7089, lon: 11.9746 },
  "pagney_derriere_barine-france": { lat: 47.7294, lon: 6.1269 },
  "hamburg-germany": { lat: 53.5511, lon: 9.9937 },
  "boulogne_billancourt-france": { lat: 48.8397, lon: 2.2399 },
  "nimes-france": { lat: 43.8367, lon: 4.3601 },
  "sion-switzerland": { lat: 46.2330, lon: 7.3580 },
  "ostrava-czechia": { lat: 49.8340, lon: 18.2929 },
  "klagenfurt-austria": { lat: 46.6248, lon: 14.3056 },
  "freyming_merlebach-france": { lat: 49.2000, lon: 6.8333 },
  "zaragoza-spain": { lat: 41.6488, lon: -0.8891 },
  "madrid-spain": { lat: 40.4168, lon: -3.7038 },
  "barcelona-spain": { lat: 41.3851, lon: 2.1734 },
  "rio_de_janeiro-brazil": { lat: -22.9068, lon: -43.1729 },
  "recife-brazil": { lat: -8.0578, lon: -34.8820 },
  "leipzig-germany": { lat: 51.3397, lon: 12.3731 },
  "salem-germany": { lat: 49.3400, lon: 8.6572 },
  "monchengladbach-germany": { lat: 51.1912, lon: 6.4430 },
  "cuxhaven-germany": { lat: 53.8577, lon: 8.6941 },
  "skanderborg-denmark": { lat: 56.0468, lon: 9.9851 },
  "amsterdam-netherlands": { lat: 52.3676, lon: 4.9041 },
  "burriana-spain": { lat: 39.9031, lon: -0.0675 },
  "oulu-finland": { lat: 65.0121, lon: 25.4651 },
  "napoca-romania": { lat: 46.7704, lon: 23.5914 },
  "riyadh-saudi_arabia": { lat: 24.7136, lon: 46.6753 },
  "canton-usa": { lat: 30.2233, lon: -97.6981 },
  "quebec-canada": { lat: 46.8139, lon: -71.2080 },
  "las_vegas-usa": { lat: 36.1699, lon: -115.1398 },
  "mexico_city-mexico": { lat: 19.4326, lon: -99.1332 },
  "monterrey-mexico": { lat: 25.6866, lon: -100.3161 },
  "del_mar-usa": { lat: 32.9570, lon: -117.2653 },
  "birmingham-uk": { lat: 52.4862, lon: -1.8904 },
  "west_melbourne-australia": { lat: -37.8316, lon: 144.9752 },
  "madison-usa": { lat: 43.0731, lon: -89.4012 },
  "toronto-canada": { lat: 43.6532, lon: -79.3832 },
  "cleveland-usa": { lat: 41.4993, lon: -81.6944 },
  "boston-usa": { lat: 42.3601, lon: -71.0589 },
  "utah-usa": { lat: 39.3200, lon: -111.0937 },
  "glasgow-uk": { lat: 55.8642, lon: -4.2518 },
  "dublin-ireland": { lat: 53.3331, lon: -6.2489 },
  "cardiff-uk": { lat: 51.4816, lon: -3.1791 },
  "aberdeen-uk": { lat: 57.1497, lon: -2.0943 },
  "warsaw-poland": { lat: 52.2297, lon: 21.0122 },
  "milan-italy": { lat: 45.4642, lon: 9.1900 },
  "michigan-usa": { lat: 44.3148, lon: -85.6024 },
  "new_hampshire-usa": { lat: 43.1939, lon: -71.5724 },
  "sochaux-france": { lat: 47.3312, lon: 6.8167 },
  "eindhoven-netherlands": { lat: 51.4416, lon: 5.4697 },
  "oslo-norway": { lat: 59.9139, lon: 10.7522 },
  "jakarta-indonesia": { lat: -6.2088, lon: 106.8456 },
  "huizhou-china": { lat: 23.1135, lon: 114.4150 },
  "changzhou-china": { lat: 31.8107, lon: 119.9741 },
  "hong_kong-china": { lat: 22.3193, lon: 114.1694 },
  "sanya-china": { lat: 18.2528, lon: 109.5119 },
  "aalborg-denmark": { lat: 57.0488, lon: 9.9217 },
  "seattle-usa": { lat: 47.6062, lon: -122.3321 },
  "omaha-usa": { lat: 41.2565, lon: -95.9345 },
  "kansas_city-usa": { lat: 39.0997, lon: -94.5786 },
  "st_louis-usa": { lat: 38.6270, lon: -90.1994 },
  "indianapolis-usa": { lat: 39.7684, lon: -86.1581 },
  "rosemont-usa": { lat: 41.9803, lon: -87.8991 },
  "grand_rapids-usa": { lat: 42.9634, lon: -85.6681 },
  "montreal-usa": { lat: 45.5017, lon: -73.5673 },
  "newark-usa": { lat: 40.7357, lon: -74.1724 },
  "uniondale-usa": { lat: 40.7153, lon: -73.5890 },
  "hershey-usa": { lat: 40.2859, lon: -76.6508 },
  "pittsburgh-usa": { lat: 40.4406, lon: -79.9959 },
  "santiago-chile": { lat: -33.4489, lon: -70.6693 },
  "houston-usa": { lat: 29.7604, lon: -95.3698 },
  "atlanta-usa": { lat: 33.7490, lon: -84.3880 },
  "new_orleans-usa": { lat: 29.9511, lon: -90.0715 },
  "frauenfeld-switzerland": { lat: 47.6559, lon: 8.8992 },
  "turku-finland": { lat: 60.4518, lon: 22.2666 },
  "brooklyn-usa": { lat: 40.6782, lon: -73.9442 },
  "oakland-usa": { lat: 37.8044, lon: -122.2711 },
  "charlotte-usa": { lat: 35.2271, lon: -80.8431 },
  "inglewood-usa": { lat: 33.9617, lon: -118.3530 },
  "burswood-australia": { lat: -32.0351, lon: 115.9103 },
  "wellington-new_zealand": { lat: -41.2865, lon: 174.7762 },
  "bangkok-thailand": { lat: 13.7563, lon: 100.5018 },
  "taipei-taiwan": { lat: 25.0330, lon: 121.5654 },
  "seoul-south_korea": { lat: 37.5665, lon: 126.9780 },
  "munich-germany": { lat: 48.1351, lon: 11.5820 },
  "mannheim-germany": { lat: 49.4875, lon: 8.4660 },
  "san_francisco-usa": { lat: 37.7749, lon: -122.4194 },
  "buenos_aires-argentina": { lat: -34.6037, lon: -58.3816 },
  "porto_alegre-brazil": { lat: -30.0346, lon: -51.2177 },
  "belo_horizonte-brazil": { lat: -19.9167, lon: -43.9345 },
  "la_plata-argentina": { lat: -34.9214, lon: -57.9544 },
  "dubai-united_arab_emirates": { lat: 25.2048, lon: 55.2708 },
  "willemstad-netherlands_antilles": { lat: 12.1096, lon: -68.9332 },
  "brasilia-brazil": { lat: -15.8267, lon: -47.9218 },
  "texas-usa": { lat: 31.9686, lon: -99.9018 },
  "oklahoma-usa": { lat: 35.0078, lon: -97.0929 },
  "scheessel-germany": { lat: 53.2847, lon: 9.5067 },
  "st_gallen-switzerland": { lat: 47.4245, lon: 9.3767 },
  "gdynia-poland": { lat: 54.5189, lon: 18.5305 },
  "arras-france": { lat: 50.2910, lon: 2.7775 },
  "arizona-usa": { lat: 34.0489, lon: -111.0937 },
  "florida-usa": { lat: 27.6648, lon: -81.5158 },
  "berwyn-usa": { lat: 41.8379, lon: -87.8403 },
  "sochaux-france": { lat: 47.5021, lon: 6.8586 },
  "eindhoven-netherlands": { lat: 51.4416, lon: 5.4697 },
  "oslo-norway": { lat: 59.9139, lon: 10.7522 },
  "huizhou-china": { lat: 23.0791, lon: 114.4128 },
  "changzhou-china": { lat: 31.8107, lon: 119.9741 },
  "hong_kong-china": { lat: 22.3193, lon: 114.1694 },
  "sanya-china": { lat: 18.2528, lon: 109.5119 },
  "aalborg-denmark": { lat: 57.0488, lon: 9.9217 },
  "seattle-usa": { lat: 47.6062, lon: -122.3321 },
  "omaha-usa": { lat: 41.2565, lon: -95.9345 },
  "kansas_city-usa": { lat: 39.0997, lon: -94.5786 },
  "st_louis-usa": { lat: 38.6270, lon: -90.1994 },
  "indianapolis-usa": { lat: 39.7684, lon: -86.1581 },
  "rosemont-usa": { lat: 41.9908, lon: -87.8765 },
  "grand_rapids-usa": { lat: 42.9634, lon: -85.6681 },
  "newark-usa": { lat: 40.7357, lon: -74.1724 },
  "uniondale-usa": { lat: 40.7167, lon: -73.5890 },
  "hershey-usa": { lat: 40.2857, lon: -76.6500 },
  "pittsburgh-usa": { lat: 40.4406, lon: -79.9959 },
  "san_jose-costa_rica": { lat: 9.9281, lon: -84.0907 },
  "nickelsdorf-austria": { lat: 47.9603, lon: 16.9339 },
  "frauenfeld-switzerland": { lat: 47.5570, lon: 8.8982 },
  "turku-finland": { lat: 60.4518, lon: 22.2666 },
  "burswood-australia": { lat: -32.0219, lon: 115.9037 },
  "wellington-new_zealand": { lat: -41.2865, lon: 174.7762 },
  "abu_dhabi-united_arab_emirates": { lat: 24.4539, lon: 54.3773 },
  "bangkok-thailand": { lat: 13.7563, lon: 100.5018 },
  "taipei-taiwan": { lat: 25.0330, lon: 121.5654 },
  "seoul-south_korea": { lat: 37.5665, lon: 126.9780 },
  "belo_horizonte-brazil": { lat: -19.9167, lon: -43.9345 },
  "la_plata-argentina": { lat: -34.9214, lon: -57.9544 },
  "willemstad-netherlands_antilles": { lat: 12.1224, lon: -68.8820 },
  "scheessel-germany": { lat: 53.2526, lon: 9.8494 },
  "st_gallen-switzerland": { lat: 47.4230, lon: 9.3747 },
  "gdynia-poland": { lat: 54.5189, lon: 18.5305 },
  "arras-france": { lat: 50.2910, lon: 2.7775 },
  "berwyn-usa": { lat: 41.8506, lon: -87.7935 },
  "rotselaar-belgium": { lat: 50.9676, lon: 4.6954 }
};

// =============================
// Formatage lisible des lieux
// =============================
window.formatLocationName = function(locationKey) { // Fonction globale qui prend un identifiant comme "los_angeles-usa" et renvoie une version lisible: "Los Angeles, États-Unis"
  if (!locationKey || typeof locationKey !== 'string') return locationKey; // Si la clé n’existe pas ou n’est pas une string, renvoyer telle quelle

  const [cityRaw = '', countryRaw = ''] = locationKey.split('-'); // On sépare la clé en deux parties: ville et pays. Exemple: "los_angeles-usa" => cityRaw = "los_angeles", countryRaw = "usa"

  const capitalizeWords = str =>
    str
      .replace(/_/g, ' ') // Remplace les underscores par des espaces
      .toLowerCase() // Met tout en minuscules
      .replace(/\b\w/g, c => c.toUpperCase()); 
  // Majuscule sur chaque première lettre d’un mot
  // Exemple: "los_angeles" => "Los Angeles"

  const countryMap = { // Tableau de correspondance entre code pays et nom français
    usa: 'États-Unis',
    uk: 'Royaume-Uni',
    mexico: 'Mexique',
    france: 'France',
    germany: 'Allemagne',
    spain: 'Espagne',
    italy: 'Italie',
    brazil: 'Brésil',
    argentina: 'Argentine',
    japan: 'Japon',
    china: 'Chine',
    sweden: 'Suède',
    switzerland: 'Suisse',
    belgium: 'Belgique',
    portugal: 'Portugal',
    netherlands: 'Pays-Bas',
    australia: 'Australie',
    canada: 'Canada',
    poland: 'Pologne',
    austria: 'Autriche',
    finland: 'Finlande',
    norway: 'Norvège',
    ireland: 'Irlande',
    denmark: 'Danemark',
    qatar: 'Qatar',
    chile: 'Chili',
    india: 'Inde',
    indonesia: 'Indonésie',
    thailand: 'Thaïlande',
    taiwan: 'Taïwan',
    south_korea: 'Corée du Sud',
    new_zealand: 'Nouvelle-Zélande',
    united_arab_emirates: 'Émirats arabes unis',
    saudi_arabia: 'Arabie saoudite',
    czechia: 'Tchéquie',
    romania: 'Roumanie',
    slovakia: 'Slovaquie',
    hungary: 'Hongrie',
    colombia: 'Colombie',
    costa_rica: 'Costa Rica',
    netherlands_antilles: 'Antilles néerlandaises',
    french_polynesia: 'Polynésie française',
    new_caledonia: 'Nouvelle-Calédonie'
  };

  const city = capitalizeWords(cityRaw);
  // Applique le formatage sur le nom de la ville
  const country =
    countryMap[countryRaw.toLowerCase()] || // Si code pays connu, on prend le nom français
    capitalizeWords(countryRaw); // Sinon on applique un formatage générique

  return country ? `${city}, ${country}` : city;
  // Retourne "Ville, Pays" si pays existe, sinon juste "Ville"
};
